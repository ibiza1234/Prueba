<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calculadora Taxi Ibiza</title>
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />

<style>
* {
  box-sizing: border-box;
}

body { 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg, #fbbf24 0%, #fcd34d 50%, #fde68a 100%);
  min-height: 100vh;
}

.container {
  max-width: 720px;
  margin: 0 auto;
  padding: 20px;
}

.header {
  text-align: center;
  margin-bottom: 30px;
}

.header-icon {
  background: #fbbf24;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  margin-bottom: 10px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

h2 { 
  color: #1f2937;
  font-size: 32px;
  font-weight: bold;
  margin: 10px 0;
}

.card {
  background: white;
  border-radius: 16px;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  padding: 32px;
  margin-bottom: 24px;
}

.input-row { 
  margin-bottom: 20px;
  position: relative;
}

.input-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 8px;
}

.input-icon {
  width: 16px;
  height: 16px;
}

input[type="text"] { 
  width: 100%;
  padding: 12px 16px;
  font-size: 16px;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  transition: all 0.3s;
  outline: none;
}

input[type="text"]:focus {
  border-color: #fbbf24;
  box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.1);
}

.suggestions { 
  border: 1px solid #e5e7eb;
  background: white;
  position: absolute;
  z-index: 1000;
  width: 100%;
  border-radius: 8px;
  margin-top: 4px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  max-height: 200px;
  overflow-y: auto;
}

.suggestions div { 
  padding: 12px 16px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  border-bottom: 1px solid #f3f4f6;
  transition: background 0.2s;
}

.suggestions div:last-child {
  border-bottom: none;
}

.suggestions div:hover { 
  background: #f9fafb;
}

.poi-badge { 
  font-size: 11px;
  color: #6b7280;
  background: #f3f4f6;
  padding: 2px 8px;
  border-radius: 4px;
  margin-left: 8px;
}

.checkbox-group {
  margin-bottom: 24px;
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: #f9fafb;
  border-radius: 8px;
  cursor: pointer;
  margin-bottom: 12px;
  transition: all 0.3s;
  border: 2px solid transparent;
}

.checkbox-label:hover {
  background: #f3f4f6;
  border-color: #fde68a;
}

input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
  accent-color: #fbbf24;
}

.checkbox-text {
  flex: 1;
  font-weight: 500;
  color: #374151;
  font-size: 14px;
}

button { 
  width: 100%;
  padding: 16px;
  font-size: 16px;
  font-weight: bold;
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 4px 6px rgba(59, 130, 246, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

button:hover {
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  transform: scale(1.02);
}

button[disabled] { 
  opacity: 0.6;
  cursor: not-allowed;
  transform: scale(1);
}

.tarifa-btn {
  padding: 12px;
  font-size: 14px;
  font-weight: 600;
  transition: all 0.3s;
}

.tarifa-btn:hover {
  transform: scale(1.02);
}

.tarifa-btn-active {
  color: #1f2937;
}

#map { 
  height: 350px;
  margin: 24px 0;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.result { 
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  padding: 24px;
  margin-top: 24px;
  border-radius: 12px;
  box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.3);
  font-size: 15px;
  line-height: 1.8;
}

.result b {
  display: block;
  margin-top: 8px;
  font-size: 16px;
}

.result b:first-child {
  margin-top: 0;
}

.info-card {
  background: white;
  border-radius: 16px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  padding: 24px;
}

.info-title {
  font-size: 20px;
  font-weight: bold;
  color: #1f2937;
  margin-bottom: 16px;
}

.info-row {
  display: flex;
  justify-content: space-between;
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 8px;
  font-size: 14px;
}

.info-row:nth-child(odd) {
  background: #fef3c7;
}

.info-row:nth-child(even) {
  background: #f9fafb;
}

.info-row span:first-child {
  font-weight: 600;
  color: #374151;
}

.info-row span:last-child {
  font-weight: bold;
  color: #1f2937;
}

.notice { 
  font-size: 12px;
  color: #6b7280;
  background: #dbeafe;
  padding: 12px 16px;
  border-radius: 8px;
  border-left: 4px solid #3b82f6;
  line-height: 1.6;
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <div class="header-icon">üöñ</div>
    <h2>Calculadora Taxi Ibiza</h2>
  </div>

  <div class="card">
    <div class="input-row">
      <label class="input-label">
        <span style="color: #10b981;">üìç</span>
        Origen
      </label>
      <input id="origen" type="text" placeholder="Ej: Aeropuerto de Ibiza" aria-label="Origen (Ibiza)">
      <div id="sugOrigen" class="suggestions" aria-hidden="true"></div>
    </div>

    <div class="input-row">
      <label class="input-label">
        <span style="color: #ef4444;">üìç</span>
        Destino
      </label>
      <input id="destino" type="text" placeholder="Ej: Sant Antoni" aria-label="Destino (Ibiza)">
      <div id="sugDestino" class="suggestions" aria-hidden="true"></div>
    </div>

    <div style="margin-bottom: 24px;">
      <label class="input-label">
        <span>üïê</span>
        Horario
      </label>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
        <button type="button" id="btnDiurno" class="tarifa-btn tarifa-btn-active" style="background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); box-shadow: 0 4px 6px rgba(251, 191, 36, 0.3);">
          ‚òÄÔ∏è Diurno
          <div style="font-size: 12px; font-weight: normal; margin-top: 4px;">7:00 - 21:00</div>
        </button>
        <button type="button" id="btnNocturno" class="tarifa-btn" style="background: #e5e7eb; color: #6b7280; box-shadow: none;">
          üåô Nocturno
          <div style="font-size: 12px; font-weight: normal; margin-top: 4px;">21:00 - 7:00</div>
        </button>
      </div>
    </div>

    <div class="checkbox-group">
      <label class="checkbox-label">
        <input type="checkbox" id="suplAeropuerto">
        <span class="checkbox-text">‚úàÔ∏è Suplemento Aeropuerto / Puerto (+2,00 ‚Ç¨)</span>
      </label>

      <label class="checkbox-label">
        <input type="checkbox" id="suplApp">
        <span class="checkbox-text">üì± Servicio por App / Tel√©fono (+1,45 ‚Ç¨)</span>
      </label>
    </div>

    <button id="btnCalcular" type="button">
      <span>üßÆ</span>
      Calcular precio
    </button>

    <div id="map" role="region" aria-label="Mapa de ruta"></div>

    <div id="resultado" class="result" style="display: none;" aria-live="polite"></div>
  </div>

  <div class="info-card">
    <div class="info-title">üìã Informaci√≥n de Tarifas</div>
    <div class="info-row">
      <span>Bajada de bandera (ambas tarifas):</span>
      <span>4,00 ‚Ç¨</span>
    </div>
    <div class="info-row">
      <span>Precio por km (Tarifa 1 - Diurna):</span>
      <span>1,21 ‚Ç¨/km</span>
    </div>
    <div class="info-row">
      <span>Precio por km (Tarifa 2 - Nocturna):</span>
      <span>1,47 ‚Ç¨/km</span>
    </div>
    <div class="info-row">
      <span>Suplemento Aeropuerto/Puerto:</span>
      <span>+2,00 ‚Ç¨</span>
    </div>
    <div class="info-row">
      <span>Suplemento App/Tel√©fono:</span>
      <span>+1,45 ‚Ç¨</span>
    </div>
  </div>

  <div class="notice" style="margin-top: 16px;">
    ‚ÑπÔ∏è Solo se permiten direcciones dentro de la isla de Ibiza.<br>
    Precio orientativo. El importe final ser√° el marcado por el tax√≠metro.
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ================= CONFIGURACI√ìN =================
const IBIZA_BBOX = "1.10,38.85,1.60,39.15";
const LAT_MIN = 38.85, LAT_MAX = 39.15, LON_MIN = 1.10, LON_MAX = 1.60;
const nfEuros = new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' });

// ================= MAPA =================
const map = L.map('map').setView([38.9067, 1.4206], 11);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 18, attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors' }).addTo(map);
let routeLayer = null; let markerOrigen = null; let markerDestino = null;

// ================= POIS CARGA =================
let POIS = [];
// POIs feature disabled - file not available

function searchLocalPOIs(q, limit = 5) {
  if (!q || q.trim().length < 2) return [];
  const s = q.trim().toLowerCase();
  const matches = POIS.filter(p => {
    if (p.name.toLowerCase().includes(s)) return true;
    if (p.aliases && p.aliases.some(a => a.toLowerCase().includes(s))) return true;
    return false;
  });
  return matches.slice(0, limit);
}

// ================= UTIL: debounce & controllers =================
function debounce(fn, wait) { let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn.apply(this, args), wait); }; }
const controllers = { origen: null, destino: null };

// ================= FETCH HELPER (support signal) =================
async function fetchText(url, signal) {
  try {
    const opts = { cache: 'no-store' };
    if (signal) opts.signal = signal;
    const res = await fetch(url, opts);
    const text = await res.text();
    let json = null; try { json = JSON.parse(text); } catch (e) {}
    return { ok: res.ok, status: res.status, text, json, url };
  } catch (err) {
    if (err.name === 'AbortError') return { ok: false, status: 0, text: 'aborted', json: null, url };
    console.error('[fetchText] fetch error', err); return { ok: false, status: 0, text: String(err), json: null, url };
  }
}

// ================= AUTOCOMPLETE con prioridad POIs locales =================
async function autocomplete(text, container, input) {
  container.innerHTML = ""; container.setAttribute('aria-hidden', 'true');
  if (!text || text.length < 2) return;

  const key = input.id; if (controllers[key]) controllers[key].abort(); controllers[key] = new AbortController(); const signal = controllers[key].signal;

  const local = searchLocalPOIs(text, 5);
  const addedNames = new Set();
  if (local.length) {
    local.forEach(p => {
      const div = document.createElement('div');
      div.textContent = p.name;
      const span = document.createElement('span'); span.className = 'poi-badge'; span.textContent = p.category; div.appendChild(span);
      div.onclick = () => { input.value = p.name; input.dataset.lat = String(p.lat); input.dataset.lon = String(p.lon); container.innerHTML = ''; container.setAttribute('aria-hidden','true'); };
      div.tabIndex = 0; div.onkeydown = (e)=>{ if(e.key==='Enter') div.onclick(); };
      container.appendChild(div); addedNames.add(p.name);
    });
    container.setAttribute('aria-hidden','false');
  }

  const photonBase = 'https://photon.komoot.io/api/';
  const paramsBase = (useBBox) => { const sp = new URLSearchParams(); sp.set('q', text); sp.set('limit', '5'); sp.set('lang', 'default'); if (useBBox) sp.set('bbox', `${LON_MIN},${LAT_MIN},${LON_MAX},${LAT_MAX}`); return photonBase + '?' + sp.toString(); };

  let resp = await fetchText(paramsBase(true), signal);
  console.log('[autocomplete] Photon (with bbox) ->', resp.status, resp.url);
  if (!resp.ok && resp.status === 400) { resp = await fetchText(paramsBase(false), signal); console.log('[autocomplete] Photon (no bbox) ->', resp.status, resp.url); }

  if (resp.ok && resp.json && Array.isArray(resp.json.features) && resp.json.features.length) {
    resp.json.features.forEach(f => {
      const coords = f.geometry && f.geometry.coordinates; if (!coords) return; const lon = coords[0], lat = coords[1];
      if (lat < LAT_MIN || lat > LAT_MAX || lon < LON_MIN || lon > LON_MAX) return;
      const name = (f.properties && (f.properties.name || f.properties.city || f.properties.display_name)) || 'Ubicaci√≥n';
      if (addedNames.has(name)) return;
      const div = document.createElement('div'); div.textContent = name; div.onclick = () => { input.value = name; input.dataset.lat = String(lat); input.dataset.lon = String(lon); container.innerHTML = ''; container.setAttribute('aria-hidden','true'); };
      div.tabIndex = 0; div.onkeydown = (e)=>{ if(e.key==='Enter') div.onclick(); };
      container.appendChild(div); addedNames.add(name);
      container.setAttribute('aria-hidden','false');
    });
    return;
  }

  console.warn('[autocomplete] Photon failed or empty:', resp.status, resp.text);

  try {
    const nomParams = new URLSearchParams({ format: 'geojson', q: text, limit: '5', viewbox: `${LON_MIN},${LAT_MAX},${LON_MAX},${LAT_MIN}`, bounded: '1', 'accept-language': 'es' });
    const nomUrl = 'https://nominatim.openstreetmap.org/search?' + nomParams.toString();
    const rn = await fetchText(nomUrl, signal);
    console.log('[autocomplete] Nominatim ->', rn.status, nomUrl);
    if (rn.ok && rn.json && Array.isArray(rn.json.features) && rn.json.features.length) {
      rn.json.features.forEach(f => {
        const coords = f.geometry && f.geometry.coordinates; if (!coords) return; const lon = coords[0], lat = coords[1];
        if (lat < LAT_MIN || lat > LAT_MAX || lon < LON_MIN || lon > LON_MAX) return;
        const name = (f.properties && (f.properties.display_name || f.properties.name)) || 'Ubicaci√≥n';
        if (addedNames.has(name)) return;
        const div = document.createElement('div'); div.textContent = name; div.onclick = () => { input.value = name; input.dataset.lat = String(lat); input.dataset.lon = String(lon); container.innerHTML = ''; container.setAttribute('aria-hidden','true'); };
        div.tabIndex = 0; div.onkeydown = (e)=>{ if(e.key==='Enter') div.onclick(); };
        container.appendChild(div); addedNames.add(name);
        container.setAttribute('aria-hidden','false');
      });
      return;
    } else {
      if (!local.length) renderMessage(container, 'No hay resultados');
      return;
    }
  } catch (err) { console.error('[autocomplete] Nominatim error', err); if (!local.length) renderMessage(container, 'Error al buscar direcciones (ver consola)'); }
}

function renderMessage(container, msg) { container.innerHTML = ''; const d = document.createElement('div'); d.className = 'small'; d.textContent = msg; container.appendChild(d); container.setAttribute('aria-hidden','false'); }

// ================= GEOCODIFICACI√ìN MANUAL =================
async function geocodeManual(text, input) {
  if (!text || text.trim().length === 0) return false;
  const key = input.id; if (controllers[key]) controllers[key].abort(); controllers[key] = new AbortController(); const signal = controllers[key].signal;

  const local = searchLocalPOIs(text, 1);
  if (local && local.length) { input.dataset.lat = String(local[0].lat); input.dataset.lon = String(local[0].lon); return true; }

  const photonBase = 'https://photon.komoot.io/api/';
  const paramsWithBBox = new URLSearchParams({ q: text, limit: '1', lang: 'default', bbox: `${LON_MIN},${LAT_MIN},${LON_MAX},${LAT_MAX}` }).toString();
  let feature = null;
  try {
    let r = await fetchText(photonBase + '?' + paramsWithBBox, signal);
    if (!r.ok && r.status === 400) r = await fetchText(photonBase + '?' + new URLSearchParams({ q: text, limit: '1', lang: 'default' }).toString(), signal);
    if (r.ok && r.json && Array.isArray(r.json.features) && r.json.features.length) feature = r.json.features[0];
  } catch (e) { console.warn('[geocodeManual] Photon error', e); }

  if (feature) { const lon = feature.geometry.coordinates[0]; const lat = feature.geometry.coordinates[1]; if (lat < LAT_MIN || lat > LAT_MAX || lon < LON_MIN || lon > LON_MAX) return false; input.dataset.lat = String(lat); input.dataset.lon = String(lon); return true; }

  try {
    const nomParams = new URLSearchParams({ format: 'geojson', q: text, limit: '1', viewbox: `${LON_MIN},${LAT_MAX},${LON_MAX},${LAT_MIN}`, bounded: '1', 'accept-language': 'es' });
    const nomUrl = 'https://nominatim.openstreetmap.org/search?' + nomParams.toString();
    const rn = await fetchText(nomUrl, signal);
    if (rn.ok && rn.json && Array.isArray(rn.json.features) && rn.json.features.length) {
      const lon = rn.json.features[0].geometry.coordinates[0]; const lat = rn.json.features[0].geometry.coordinates[1]; if (lat < LAT_MIN || lat > LAT_MAX || lon < LON_MIN || lon > LON_MAX) return false; input.dataset.lat = String(lat); input.dataset.lon = String(lon); return true;
    }
  } catch (e) { console.warn('[geocodeManual] Nominatim error', e); }

  return false;
}

// ================= TARIFA Y C√ÅLCULO =================
let tarifaManual = null; // null = autom√°tica, 1 = diurna, 2 = nocturna

function tarifaActual(now = new Date()) { 
  if (tarifaManual !== null) return tarifaManual; // Usar selecci√≥n manual si existe
  const h = now.getHours(); 
  const d = now.getDay(); 
  if (h >= 21 || h < 7) return 2; 
  if (d === 0) return 2; 
  if (d === 6 && h >= 15) return 2; 
  return 1; 
}

// Botones de tarifa
const btnDiurno = document.getElementById('btnDiurno');
const btnNocturno = document.getElementById('btnNocturno');

btnDiurno.addEventListener('click', () => {
  tarifaManual = 1;
  btnDiurno.classList.add('tarifa-btn-active');
  btnNocturno.classList.remove('tarifa-btn-active');
  btnDiurno.style.background = 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)';
  btnDiurno.style.color = '#1f2937';
  btnDiurno.style.boxShadow = '0 4px 6px rgba(251, 191, 36, 0.3)';
  btnNocturno.style.background = '#e5e7eb';
  btnNocturno.style.color = '#6b7280';
  btnNocturno.style.boxShadow = 'none';
});

btnNocturno.addEventListener('click', () => {
  tarifaManual = 2;
  btnNocturno.classList.add('tarifa-btn-active');
  btnDiurno.classList.remove('tarifa-btn-active');
  btnNocturno.style.background = 'linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)';
  btnNocturno.style.color = 'white';
  btnNocturno.style.boxShadow = '0 4px 6px rgba(99, 102, 241, 0.3)';
  btnDiurno.style.background = '#e5e7eb';
  btnDiurno.style.color = '#6b7280';
  btnDiurno.style.boxShadow = 'none';
});

async function calcular() {
  const btn = document.getElementById('btnCalcular');
  const resultado = document.getElementById('resultado');
  btn.disabled = true;
  const origVal = origenInput.value.trim();
  const destVal = destinoInput.value.trim();
  resultado.style.display = 'block';
  resultado.textContent = 'Calculando‚Ä¶';
  
  if (!origenInput.dataset.lat) {
    const ok = await geocodeManual(origVal, origenInput);
    if (!ok) {
      alert('Origen no v√°lido en Ibiza');
      resultado.style.display = 'none';
      btn.disabled = false;
      return;
    }
  }
  
  if (!destinoInput.dataset.lat) {
    const ok = await geocodeManual(destVal, destinoInput);
    if (!ok) {
      alert('Destino no v√°lido en Ibiza');
      resultado.style.display = 'none';
      btn.disabled = false;
      return;
    }
  }

  const lat1 = parseFloat(origenInput.dataset.lat);
  const lon1 = parseFloat(origenInput.dataset.lon);
  const lat2 = parseFloat(destinoInput.dataset.lat);
  const lon2 = parseFloat(destinoInput.dataset.lon);
  
  if (![lat1,lon1,lat2,lon2].every(Number.isFinite)) {
    alert('Coordenadas no v√°lidas');
    resultado.style.display = 'none';
    btn.disabled = false;
    return;
  }

  if (markerOrigen) map.removeLayer(markerOrigen);
  markerOrigen = L.marker([lat1, lon1]).addTo(map).bindPopup('Origen').openPopup();
  if (markerDestino) map.removeLayer(markerDestino);
  markerDestino = L.marker([lat2, lon2]).addTo(map).bindPopup('Destino');

  const url = `https://router.project-osrm.org/route/v1/driving/${lon1},${lat1};${lon2},${lat2}?overview=full&geometries=geojson`;
  
  try {
    const res = await fetch(url);
    if (!res.ok) throw new Error('Error en el servicio de rutas');
    
    const data = await res.json();
    if (!data.routes || data.routes.length === 0) throw new Error('No se encontr√≥ ruta');
    
    const km = data.routes[0].distance / 1000;
    const tarifa = tarifaActual();
    const precioKm = tarifa === 1 ? 1.21 : 1.47;
    const bajada = 4.00;
    
    let total = bajada + (km * precioKm);
    
    if (document.getElementById('suplAeropuerto').checked) {
      total += 2.00;
    }
    if (document.getElementById('suplApp').checked) {
      total += 1.45;
    }
    
    console.log('ANTES:', total);
    
    // Redondear al m√∫ltiplo de 0.10‚Ç¨ superior
    total = Math.ceil(total * 10) / 10;
    
    console.log('DESPU√âS:', total);
    
    const precioFinal = total.toFixed(2).replace('.', ',') + ' ‚Ç¨';
    
    resultado.innerHTML = `<b>Tarifa aplicada:</b> ${tarifa === 1 ? 'Tarifa 1 (Diurna)' : 'Tarifa 2 (Nocturna/Festiva)'}<br><b>Distancia:</b> ${km.toFixed(2)} km<br><b>Precio estimado:</b> ${precioFinal}`;
    
    if (routeLayer) map.removeLayer(routeLayer);
    routeLayer = L.geoJSON(data.routes[0].geometry, { style: { color: '#0077cc', weight: 4 } }).addTo(map);
    map.fitBounds(routeLayer.getBounds(), { padding: [20,20] });
    
  } catch (err) {
    console.error(err);
    resultado.textContent = 'No se pudo calcular la ruta. Intenta m√°s tarde.';
    alert('Error al calcular la ruta: ' + (err.message || err));
  } finally {
    btn.disabled = false;
  }
}

const origenInput = document.getElementById('origen'); const destinoInput = document.getElementById('destino'); const sugOrigen = document.getElementById('sugOrigen'); const sugDestino = document.getElementById('sugDestino');
origenInput.addEventListener('input', debounce(() => autocomplete(origenInput.value, sugOrigen, origenInput), 300)); destinoInput.addEventListener('input', debounce(() => autocomplete(destinoInput.value, sugDestino, destinoInput), 300));
document.getElementById('btnCalcular').addEventListener('click', calcular);
</script>
</body>
</html>
